generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model admin {
  id            Int     @id @default(autoincrement())
  email         String  @unique(map: "Admin_email_key")
  password      String
  nickname      String
  profile_image String?
}

model bimbingan {
  id                             Int                @id @default(autoincrement())
  pengajuan_bimbingan_id         Int
  laporan_bimbingan_id           Int?
  status_pengesahan_kehadiran    String?
  ttd_kehadiran                  String?
  dokumentasi_kehadiran          String?
  status_kehadiran_mahasiswa     String?
  permasalahan                   String?            @db.Text
  solusi                         String?            @db.Text
  laporan_bimbingan              laporanbimbingan?  @relation(fields: [laporan_bimbingan_id], references: [id], map: "Bimbingan_laporan_bimbingan_id_fkey")
  pengajuan_bimbingan            pengajuanbimbingan @relation(fields: [pengajuan_bimbingan_id], references: [id], map: "Bimbingan_pengajuan_bimbingan_id_fkey")

  @@index([laporan_bimbingan_id], map: "Bimbingan_laporan_bimbingan_id_fkey")
  @@index([pengajuan_bimbingan_id], map: "Bimbingan_pengajuan_bimbingan_id_fkey")
}

model chatpribadi {
  id                      Int                  @id @default(autoincrement())
  mahasiswa_id            Int
  dosen_pa_id             Int
  is_pesan_terakhir_read  Boolean
  pesan_terakhir          String
  waktu_pesan_terakhir    DateTime
  pengirim_pesan_terakhir String
  dosen_pa                dosenpa              @relation(fields: [dosen_pa_id], references: [id], map: "ChatPribadi_dosen_pa_id_fkey")
  mahasiswa               mahasiswa            @relation(fields: [mahasiswa_id], references: [id], map: "ChatPribadi_mahasiswa_id_fkey")
  pesanchatdosenpa        pesanchatdosenpa[]
  pesanchatmahasiswa      pesanchatmahasiswa[]

  @@index([dosen_pa_id], map: "ChatPribadi_dosen_pa_id_fkey")
  @@index([mahasiswa_id], map: "ChatPribadi_mahasiswa_id_fkey")
}

model dosenpa {
  id                   Int                      @id @default(autoincrement())
  email                String                   @unique(map: "Dosen_email_key")
  nip                  String                   @unique(map: "Dosen_nip_key")
  password             String
  nama                 String
  profile_image        String?
  hp                   String
  chatpribadi          chatpribadi[]
  jadwaldosenpa        jadwaldosenpa[]
  laporanbimbingan     laporanbimbingan[]
  mahasiswa            mahasiswa[]
  notifikasidosenpa    notifikasidosenpa[]
  pengajuanbimbingan   pengajuanbimbingan[]
}

model kaprodi {
  id              Int       @id @default(autoincrement())
  email           String    @unique(map: "Dosen_email_key")
  nip             String    @unique(map: "Dosen_nip_key")
  password        String
  nama            String
  profile_image   String?
  kaprodi_jurusan String?
  hp              String
  laporanbimbingan   laporanbimbingan[]
  notifikasikaprodi  notifikasikaprodi[]
}

model jadwaldosenpa {
  id          Int     @id @default(autoincrement())
  dosen_pa_id Int
  hari        String
  jam_mulai   String
  jam_selesai String
  dosen_pa    dosenpa @relation(fields: [dosen_pa_id], references: [id], map: "JadwalDosenPA_dosen_pa_id_fkey")

  @@index([dosen_pa_id], map: "JadwalDosenPA_dosen_pa_id_fkey")
}

model laporanbimbingan {
  id                           Int         @id @default(autoincrement())
  jumlah_beasiswa_bbm          Int?
  jumlah_beasiswa_dll          Int?
  jumlah_beasiswa_pegadaian    Int?
  jumlah_beasiswa_ppa          Int?
  jumlah_beasiswa_supersemar   Int?
  jumlah_beasiswa_ykl          Int?
  jumlah_ipk_a                 Int?
  jumlah_ipk_b                 Int?
  jumlah_ipk_c                 Int?
  jumlah_ipk_d                 Int?
  jumlah_ipk_e                 Int?
  kaprodi_id                   Int?
  nama_kaprodi                 String
  kesimpulan                   Json?
  dosen_pa_id                  Int?
  nama_dosen_pa                String
  pendahuluan                  Json?
  semester                     String
  status                       String
  jenis_bimbingan              String
  jumlah_mahasiswa             Int
  tahun_ajaran                 String
  tanda_tangan_dosen_pa        String?
  dokumentasi                  String?                  @db.Text         
  jadwal_bimbingan             String
  feedback_kaprodi             String?
  datastatusmahasiswa          datastatusmahasiswa      []  
  prestasi_ilmiah_mahasiswa    prestasiilmiahmahasiswa  []
  prestasi_porseni_mahasiswa   prestasiporsenimahasiswa []
  bimbingan                    bimbingan                []
  dosen_pa                     dosenpa?                 @relation(fields: [dosen_pa_id], references: [id], map: "LaporanBimbingan_dosen_pa_id_fkey")
  kaprodi                      kaprodi?                 @relation(fields: [kaprodi_id], references: [id], map: "LaporanBimbingan_kaprodi_id_fkey")

  @@index([dosen_pa_id], map: "LaporanBimbingan_dosen_pa_id_fkey")
  @@index([kaprodi_id], map: "LaporanBimbingan_kaprodi_id_fkey")
}

model datastatusmahasiswa {
  id                             Int                @id @default(autoincrement())
  laporan_bimbingan_id           Int?
  nama                           String?
  nim                            String?
  status          String?
  laporan_bimbingan              laporanbimbingan?  @relation(fields: [laporan_bimbingan_id], references: [id], map: "DataStatusMahasiswa_laporan_bimbingan_id_fkey")

  @@index([laporan_bimbingan_id], map: "DataStatusMahasiswa_laporan_bimbingan_id_fkey")
}

model prestasiilmiahmahasiswa {
  id                             Int                @id @default(autoincrement())
  laporan_bimbingan_id           Int?
  bidang_prestasi                String?
  lampiran                       String?
  nama                           String?
  nim                            String?
  tingkat_prestasi               String?
  laporan_bimbingan              laporanbimbingan?  @relation(fields: [laporan_bimbingan_id], references: [id], map: "PrestasiIlmiahMahasiswa_laporan_bimbingan_id_fkey")

  @@index([laporan_bimbingan_id], map: "PrestasiIlmiahMahasiswa_laporan_bimbingan_id_fkey")
}

model prestasiporsenimahasiswa {
  id                             Int                @id @default(autoincrement())
  laporan_bimbingan_id           Int?
  jenis_kegiatan                 String?
  lampiran                       String?
  nama                           String?
  nim                            String?
  tingkat_prestasi               String?
  laporan_bimbingan              laporanbimbingan?  @relation(fields: [laporan_bimbingan_id], references: [id], map: "PrestasiPorseniMahasiswa_laporan_bimbingan_id_fkey")

  @@index([laporan_bimbingan_id], map: "PrestasiPorseniMahasiswa_laporan_bimbingan_id_fkey")
}



model mahasiswa {
  id                   Int                    @id @default(autoincrement())
  nim                  String                 @unique(map: "Mahasiswa_nim_key")  
  email                String                 @unique(map: "Mahasiswa_email_key")
  hp                   String
  peminatan            String?
  jurusan              String
  nama                 String
  profile_image        String?
  dosen_pa_id          Int?
  dosen_pa             dosenpa?               @relation(fields: [dosen_pa_id], references: [id], map: "Mahasiswa_dosen_pa_id_fkey")
  chatpribadi          chatpribadi[]
  notifikasimahasiswa  notifikasimahasiswa[]
  pengajuanbimbingan   pengajuanbimbingan[]
  sesichatbotmahasiswa sesichatbotmahasiswa[]

  @@index([dosen_pa_id], map: "Mahasiswa_dosen_pa_id_fkey")
}

model masterjenisbimbingan {
  id              Int    @id @default(autoincrement())
  jenis_bimbingan String
  order           Int
}

model mastertopikbimbinganpribadi {
  id              Int    @id @default(autoincrement())
  topik_bimbingan String
  order           Int
}

model masterpeminatan {
  id         Int           @id @default(autoincrement())
  peminatan  String
  jurusan_id Int
  order      Int
}

model mastersistembimbingan {
  id               Int    @id @default(autoincrement())
  sistem_bimbingan String
  order            Int
}

model mastertahunajaran {
  id           Int    @id @default(autoincrement())
  order        Int
  tahun_ajaran String
}

model notifikasidosenpa {
  id          Int      @id @default(autoincrement())
  dosen_pa_id Int
  isi         String
  read        Boolean
  waktu       DateTime
  dosen_pa    dosenpa  @relation(fields: [dosen_pa_id], references: [id], map: "NotifikasiDosenPA_dosen_pa_id_fkey")

  @@index([dosen_pa_id], map: "NotifikasiDosenPA_dosen_pa_id_fkey")
}

model notifikasikaprodi {
  id         Int      @id @default(autoincrement())
  kaprodi_id Int
  isi        String
  read       Boolean
  waktu      DateTime
  kaprodi    kaprodi  @relation(fields: [kaprodi_id], references: [id], map: "NotifikasiKaprodi_kaprodi_id_fkey")

  @@index([kaprodi_id], map: "NotifikasiKaprodi_kaprodi_id_fkey")
}

model notifikasimahasiswa {
  id           Int       @id @default(autoincrement())
  mahasiswa_id Int
  isi          String
  read         Boolean
  waktu        DateTime
  mahasiswa    mahasiswa @relation(fields: [mahasiswa_id], references: [id], map: "NotifikasiMahasiswa_mahasiswa_id_fkey")

  @@index([mahasiswa_id], map: "NotifikasiMahasiswa_mahasiswa_id_fkey")
}

model pengajuanbimbingan {
  id               Int         @id @default(autoincrement())
  nama_lengkap     String
  nim              String
  email            String
  no_whatsapp      String
  jurusan          String
  jadwal_bimbingan String
  jenis_bimbingan  String
  topik_bimbingan  String?
  sistem_bimbingan String
  status           String
  dosen_pa_id      Int
  keterangan       String?
  mahasiswa_id     Int
  permasalahan     String?     @db.Text
  bimbingan        bimbingan[]
  dosen_pa         dosenpa     @relation(fields: [dosen_pa_id], references: [id], map: "PengajuanBimbingan_dosen_pa_id_fkey")
  mahasiswa        mahasiswa   @relation(fields: [mahasiswa_id], references: [id], map: "PengajuanBimbingan_mahasiswa_id_fkey")

  @@index([dosen_pa_id], map: "PengajuanBimbingan_dosen_pa_id_fkey")
  @@index([mahasiswa_id], map: "PengajuanBimbingan_mahasiswa_id_fkey")
}

model pesanbot {
  id                        Int                  @id @default(autoincrement())
  sesi_chatbot_mahasiswa_id Int
  pesan                     String               @db.VarChar(5000)
  waktu_kirim               DateTime
  sesi_chatbot_mahasiswa    sesichatbotmahasiswa @relation(fields: [sesi_chatbot_mahasiswa_id], references: [id], map: "PesanBot_sesi_chatbot_mahasiswa_id_fkey")

  @@index([sesi_chatbot_mahasiswa_id], map: "PesanBot_sesi_chatbot_mahasiswa_id_fkey")
}

model pesanchatbotmahasiswa {
  id                        Int                   @id @default(autoincrement())
  sesi_chatbot_mahasiswa_id Int?
  pesan                     String                @db.VarChar(1000)
  waktu_kirim               DateTime              @db.DateTime(0)
  sesi_chatbot_mahasiswa    sesichatbotmahasiswa? @relation(fields: [sesi_chatbot_mahasiswa_id], references: [id], map: "PesanChatbotMahasiswa_sesi_chatbot_mahasiswa_id_fkey")

  @@index([sesi_chatbot_mahasiswa_id], map: "PesanChatbotMahasiswa_sesi_chatbot_mahasiswa_id_fkey")
}

model pesanchatdosenpa {
  id              Int         @id @default(autoincrement())
  chat_pribadi_id Int
  pesan           String      @db.VarChar(1000)
  waktu_kirim     DateTime
  chat_pribadi    chatpribadi @relation(fields: [chat_pribadi_id], references: [id], map: "PesanChatDosenPA_chat_pribadi_id_fkey")

  @@index([chat_pribadi_id], map: "PesanChatDosenPA_chat_pribadi_id_fkey")
}

model pesanchatmahasiswa {
  id              Int         @id @default(autoincrement())
  chat_pribadi_id Int
  pesan           String      @db.VarChar(1000)
  waktu_kirim     DateTime
  chat_pribadi    chatpribadi @relation(fields: [chat_pribadi_id], references: [id], map: "PesanChatMahasiswa_chat_pribadi_id_fkey")

  @@index([chat_pribadi_id], map: "PesanChatMahasiswa_chat_pribadi_id_fkey")
}

model sesichatbotmahasiswa {
  id                    Int                     @id @default(autoincrement())
  mahasiswa_id          Int
  waktu_mulai           DateTime
  pesan_pertama         String
  pesanbot              pesanbot[]
  pesanchatbotmahasiswa pesanchatbotmahasiswa[]
  riwayatpesanchatbot   riwayatpesanchatbot[]
  mahasiswa             mahasiswa               @relation(fields: [mahasiswa_id], references: [id], map: "SesiChatbotMahasiswa_mahasiswa_id_fkey")

  @@index([mahasiswa_id], map: "SesiChatbotMahasiswa_mahasiswa_id_fkey")
}

model riwayatpesanchatbot {
  id                        Int                  @id @default(autoincrement())
  sesi_chatbot_mahasiswa_id Int
  role                      String
  pesan                     String               @db.VarChar(5000)
  waktu_kirim               DateTime
  sesi_chatbot              sesichatbotmahasiswa @relation(fields: [sesi_chatbot_mahasiswa_id], references: [id])

  @@index([sesi_chatbot_mahasiswa_id], map: "riwayatpesanchatbot_sesi_chatbot_mahasiswa_id_fkey")
}

model masterbabinformasiakademik {
  id                            Int                             @id @default(autoincrement())
  nama                          String
  order                         Int
  mastersubbabinformasiakademik mastersubbabinformasiakademik[]
}

model mastersubbabinformasiakademik {
  id                         Int                        @id @default(autoincrement())
  bab_informasi_akademik_id  Int
  nama                       String
  isi                        String
  order                      Int
  bab_informasi_akademik     masterbabinformasiakademik @relation(fields: [bab_informasi_akademik_id], references: [id])

  @@index([bab_informasi_akademik_id], map: "mastersubbabinformasiakademik_bab_informasi_akademik_id_fkey")
}
